# 스와이프 뷰어 (Swipe Viewer)

SillyTavern용 확장으로, 채팅 메시지의 모든 스와이프(대체 텍스트)를 쉽게 확인할 수 있게 해주는 도구입니다.

## 주요 기능

- 📄 **메시지 스와이프 보기**: 각 메시지의 모든 스와이프를 한 곳에서 확인
- 🌍 **번역문 지원**: LLM-Translator 확장과 연동하여 원문과 번역문을 동시 표시
- 🔄 **간편한 네비게이션**: 화살표 버튼이나 키보드로 스와이프 간 이동
- 💬 **스마트 텍스트뷰**: 번역문 유무에 따라 자동으로 레이아웃 변경
- 🎨 **테마 호환**: SillyTavern의 다크/라이트 테마와 자동 호환
- ⌨️ **키보드 단축키**: 좌우 화살표키와 ESC 키 지원

## 사용 방법

1. **확장 설치**: `swipe-viewer` 폴더를 SillyTavern의 확장 디렉토리에 복사
2. **확장 활성화**: SillyTavern 설정에서 "스와이프 뷰어" 확장 활성화
3. **아이콘 클릭**: 메시지 옆에 나타나는 ⇄ 아이콘을 클릭
4. **스와이프 탐색**: 
   - `<` `>` 버튼으로 이전/다음 스와이프 이동
   - 키보드 좌우 화살표키로도 이동 가능
   - ESC 키로 팝업 닫기

## 설치 방법

1. SillyTavern이 설치된 폴더로 이동
2. `public/scripts/extensions/third-party/` 폴더로 이동
3. `swipe-viewer` 폴더를 복사
4. SillyTavern 재시작 또는 확장 새로고침
5. 설정에서 "스와이프 뷰어" 확장 활성화

## 시스템 요구사항

- SillyTavern 1.10.0 이상
- 모던 웹 브라우저 (Chrome, Firefox, Safari, Edge)

## 기능 설명

### 메시지 버튼
- 각 메시지 옆에 ⇄ 아이콘이 자동으로 추가됩니다
- 스와이프가 있는 메시지에서만 버튼이 활성화됩니다
- 버튼 클릭 시 해당 메시지의 모든 스와이프를 볼 수 있는 팝업이 열립니다

### 팝업 창
- **헤더**: 현재 스와이프 번호와 전체 스와이프 수 표시
- **반응형 텍스트 영역**: 
  - **복사 버튼**: 각 텍스트 영역 우상단에 클립보드 복사 버튼
  - 번역문이 없을 때: 원문만 표시하는 전체 영역 텍스트 뷰
  - 번역문이 있을 때: 
    - **좁은 화면** (1200px 미만): 원문(위) + 번역문(아래) 세로 배치
    - **넓은 화면** (1200px 이상): 원문(좌) + 번역문(우) 가로 배치
- **하단 네비게이션**: 
  - 이전/다음 스와이프 버튼 (양쪽 끝)
  - 뷰 모드 드롭다운 (중앙) - 원문/번역문 보기 전환
  - 깔끔한 하단 바 형태의 컨트롤
- **닫기 버튼**: 우상단 × 버튼으로 팝업 닫기

### 번역문 지원
- **LLM-Translator 연동**: 설치된 LLM-Translator 확장의 번역 DB와 자동 연동
- **자동 감지**: 각 스와이프마다 번역문 존재 여부를 자동으로 확인
- **시각적 구분**: 원문과 번역문을 다른 색상의 테두리로 구분
- **독립적 작동**: LLM-Translator가 없어도 정상 작동 (원문만 표시)

### 뷰 모드 전환
- **원문/번역문 보기**: 원문과 번역문을 상하로 분할해서 동시 표시
- **원문만 보기**: 원문 텍스트만 화면에 꽉 차게 표시
- **번역문만 보기**: 번역문 텍스트만 화면에 꽉 차게 표시
- **스마트 비활성화**: 번역문이 없는 스와이프에서는 드롭다운 비활성화

### 키보드 단축키
- `←` (왼쪽 화살표): 이전 스와이프로 이동
- `→` (오른쪽 화살표): 다음 스와이프로 이동  
- `ESC`: 팝업 창 닫기

## 버전 정보

**버전 1.2.4**
- 📋 **복사 버튼**: 각 텍스트 영역 옆에 원클릭 복사 버튼 추가
  - 원문/번역문을 개별적으로 클립보드에 복사 가능
  - 복사 완료 시 체크마크 아이콘으로 피드백 제공
  - HTML 특수문자 안전 처리로 모든 텍스트에서 정상 작동
- ✨ **UI 개선**: 헤더 영역에 라벨과 복사 버튼을 가로 배치하여 공간 효율성 향상
- 📱 **모바일 최적화**: 작은 화면에서도 복사 버튼이 편리하게 사용 가능

**버전 1.2.3**
- 📱 **스마트폰 최적화**: 480px 이하 화면에서 완전한 반응형 레이아웃 지원
- 🔧 **UI 개선**: 드롭다운 버튼이 스마트폰에서 별도 줄로 배치되어 조작 편의성 향상
- 📏 **텍스트 영역 조정**: 작은 화면에서 적절한 크기로 자동 조정하여 잘림 현상 방지
- ✨ **터치 친화적**: 버튼 크기와 간격을 모바일에 최적화

**버전 1.2.2**
- 🖥️ **넓은 화면 최적화**: 1200px 이상 화면에서 원문과 번역문을 가로로 나란히 배치
- 📏 **반응형 레이아웃**: 화면 크기에 따른 자동 레이아웃 전환 (세로 ↔ 가로)
- 👀 **향상된 비교**: 가로 배치로 원문과 번역문 동시 비교 용이성 증대
- 💻 **효율적 공간 활용**: 넓은 모니터에서 화면 공간 최대 활용

**버전 1.2.1**
- 🎨 **통합 테마 시스템**: 컬러 팔레트 적용으로 SillyTavern 테마와 완벽 호환
- 📝 **번역문 없음 안내**: '번역문만 보기' 모드에서 번역문이 없을 때 친절한 안내 메시지 표시
- ✨ **일관성 향상**: SillyTavern의 기본 UI와 동일한 색상 체계 적용

**버전 1.2.0**
- 🔄 **뷰 모드 드롭다운**: 네비게이션 가운데에 표시 모드 전환 버튼 추가
- 📱 **독립 뷰 모드**: 원문만/번역문만 보기 시 화면에 꽉 차게 표시
- 🎨 **스마트 UI**: 번역문 유무에 따른 드롭다운 자동 활성화/비활성화
- ⚡ **실시간 전환**: 뷰 모드 변경 시 즉시 레이아웃 업데이트

**버전 1.1.2**
- 📐 **레이아웃 개선**: 텍스트 영역이 양쪽 끝까지 꽉 차게 확장
- 🎮 **네비게이션 하단 이동**: 컨트롤을 모달 하단으로 분리
- 🎛️ **중앙 정렬**: 네비게이션 버튼을 양쪽 끝에 배치하고 중앙 공간 확보
- 🎨 **구조 최적화**: 텍스트 영역과 네비게이션 영역 완전 분리

**버전 1.1.1**
- 🔧 **액션 버튼 동기화**: 메시지 액션 버튼 접음/펼침 상태와 연동
- 🎨 **중성 색상 적용**: 하늘색/보라색 제거, 회색 계열로 통일
- 🔄 **위치 최적화**: extraMesButtons 영역으로 이동

**버전 1.1.0**
- 🌍 **번역문 지원 추가**: LLM-Translator 확장과 연동
- 🎨 **향상된 UI**: 원문/번역문 구분, 스마트 레이아웃
- 📱 **모바일 최적화**: 화면 잘림 문제 해결
- 🎨 **색상 개선**: star-main 스타일 참고한 깔끔한 디자인

**버전 1.0.0**
- 초기 릴리스
- 기본 스와이프 뷰어 기능
- 키보드 네비게이션 지원
- 반응형 디자인

## 라이선스

이 확장은 개인 및 교육 목적으로 자유롭게 사용할 수 있습니다.

## 문제 해결

### 아이콘이 보이지 않는 경우
- SillyTavern을 새로고침해 보세요
- 확장이 활성화되어 있는지 확인하세요
- 브라우저 콘솔에서 오류 메시지를 확인하세요

### 팝업이 열리지 않는 경우
- 해당 메시지에 스와이프가 있는지 확인하세요
- 브라우저가 팝업을 차단하고 있지 않은지 확인하세요

### 스타일이 깨지는 경우
- SillyTavern의 테마와 호환성을 확인하세요
- 다른 확장과의 CSS 충돌이 있는지 확인하세요